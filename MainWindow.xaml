<Window x:Class="MM_IdealGas.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MM_IdealGas"
        mc:Ignorable="d"
        Title="2D Ideal gas" Height="650" Width="850">
   <Window.DataContext>
	   <local:ViewModel/>
   </Window.DataContext>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>
		<ItemsControl ItemsSource="{Binding Particles,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" >
			<ItemsControl.ItemsPanel>
				<ItemsPanelTemplate>
					<Canvas Background="AliceBlue" HorizontalAlignment="Left" VerticalAlignment="Top" Width="{Binding SizeCell}" Height="{Binding SizeCell}"/>
				</ItemsPanelTemplate>
			</ItemsControl.ItemsPanel>

			<ItemsControl.ItemContainerStyle>
				<Style TargetType="ContentPresenter">
					<Setter Property="Canvas.Left" Value="{Binding  X , Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
					<Setter Property="Canvas.Top" Value="{Binding  Y, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
				</Style>
			</ItemsControl.ItemContainerStyle>

			<ItemsControl.ItemTemplate>
				<DataTemplate>
					<Ellipse Fill="Red"   Width="{Binding Radius}" Height="{Binding Radius}" />
				</DataTemplate>
			</ItemsControl.ItemTemplate>

		</ItemsControl>
		<StackPanel Grid.Column="1" Margin="0,0,10,0">
            <Label Content="Количество частиц"/>
            <TextBox Text="{Binding ParticleNumber, UpdateSourceTrigger=LostFocus}"/>
            <Label Content="Коэф. для расстояния между част."/>
            <TextBox Text="{Binding MarginInit, UpdateSourceTrigger=LostFocus}"/>
            <Label Content="Максимальная Uo (м/с)"/>
            <TextBox Text="{Binding U0MaxInit, UpdateSourceTrigger=LostFocus}"/>
            
            <Label Content="Радиус обрезания: R1"/> 
            <TextBox Text="{Binding CoeffR1, UpdateSourceTrigger=LostFocus}"/>
            <Label Content="Радиус обрезания: R2"/>
            <TextBox Text="{Binding CoeffR2, UpdateSourceTrigger=LostFocus}"/>
            <Label Content="Шаг по времени (с)"/>
            <TextBox Text="{Binding TimeDelta, UpdateSourceTrigger=LostFocus}"/>
			<Label  Content="{Binding CountSteps, UpdateSourceTrigger=PropertyChanged}"/>
			<Button Content="Сгенерировать" Command="{Binding Generate}" Margin="0,10,0,0"/>
			<Button Content="{Binding StopOrStartName,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" Command="{Binding Start}" Margin="0,10,0,0"/>
		</StackPanel>
    </Grid>
</Window>
